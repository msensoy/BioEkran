@using UygulamaUI.Models
@model SelectList
@{
    ViewData["Title"] = "Anasayfa";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

    <div class="row justify-content-center mb-2">
        <img src="~/img/map.PNG" alt="Kadıköy" usemap="#planetmap" />
        <map name="planetmap">
            <area class="kadikoy" shape="circle" coords="400,250,50" href="" />
        </map>
    </div>
    <div class="container">


        @*<div class="row justify-content-end m-3">
                <a class="btn btn-info mr-3" href="/Login/Index">Düzenle</a>
                <a class="btn btn-danger" href="/Login/Index">Çıkış Yap</a>
            </div>*@

        <div class="row justify-content-center">

            <div class="col-4 border">
                <div class="form-inline justify-content-between m-1">
                    <label>Cihaz:</label>
                    @Html.DropDownList("ddlCihazlar", Model, "Cihaz Seçin", new { @class = "form-control" })
                </div>
                <div class="form-inline justify-content-between m-1">
                    <label>CihazID:</label>
                    <label id="deviceId" class="form-control"></label>
                </div>
                <div class="form-inline justify-content-between m-1">
                    <label>CihazName:</label>
                    <label id="deviceName" class="form-control"></label>
                </div>
                <div class="form-inline justify-content-between m-1">
                    <label>Working Mode:</label>
                    <label id="deviceWMode" class="form-control"></label>
                </div>
            </div>

            <div id="divCharts" class="col-7 border ml-3">
                @* graphics will come here *@
            </div>

        </div>

    </div>

<script src="~/lib/jquery/dist/jquery.js"></script>
<script>
    $(document).ready(function () {
        $("#ddlCihazlar").change(function () {
            if ($("#ddlCihazlar option:selected").text() == "Cihaz Seçin") {
                $("#deviceName").html("");
                $("#deviceId").html("");
                $("#deviceWMode").html("");
                $("#divCharts").load(`/Home/GetCharts/${0}`);
            }
            $.ajax({
                url: '/Home/GetDeviceInfo',
                data: { id: $("#ddlCihazlar").val() },
                success: function (device) {
                    $("#deviceName").html(device.name);
                    $("#deviceId").html(device.id);
                    $("#deviceWMode").html(device.workingMode);

                    $("#divCharts").load(`/Home/GetCharts/${device.id}`);
                }
            });
        });

    });
</script>
<script>
    $(".kadikoy").on("click", function (e) {
        e.preventDefault();
        $.ajax({
            url: '/Home/GetDeviceInfo',
            data: { id: 1 },
            success: function (device) {
                $("#deviceName").html(device.name);
                $("#deviceId").html(device.id);
                $("#deviceWMode").html(device.workingMode);
                $("#divCharts").load(`/Home/GetCharts/${device.id}`);
            }
        });
    });
</script>