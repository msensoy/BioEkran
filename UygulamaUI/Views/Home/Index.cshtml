@using UygulamaUI.Models
@model SelectList
@{
    ViewData["Title"] = "Anasayfa";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">


    <div class="row justify-content-end m-3">
        <a class="btn btn-info mr-3" href="/Login/Index">Düzenle</a>
        <a class="btn btn-danger" href="/Login/Index">Çıkış Yap</a>
    </div>

    <div class="row justify-content-center">

        <div class="col-4 border">
            <div class="form-inline justify-content-between m-1">
                <label>Cihaz:</label>
                @Html.DropDownList("ddlCihazlar", Model, "Cihaz Seçin", new { @class = "form-control" })
            </div>
            <div class="form-inline justify-content-between m-1">
                <label>CihazID:</label>
                <label id="deviceId" class = "form-control"></label>
            </div>
            <div class="form-inline justify-content-between m-1">
                <label>CihazName:</label>
                <label id="deviceName" class = "form-control"></label>
            </div>
            <div class="form-inline justify-content-between m-1">
                <label>Working Mode:</label>
                <label id="deviceWMode" class = "form-control"></label>
            </div>
        </div>

        <div class="col-7 border ml-3">
            <p id="deviceWMode">Grafik yeri</p>
        </div>
    </div>

</div>

<script src="~/lib/jquery/dist/jquery.js"></script>
<script>
    $(document).ready(function () {
        $("#ddlCihazlar").change(function () {
            if ($("#ddlCihazlar option:selected").text() == "Cihaz Seçin") {
                $("#deviceName").html("");
                $("#deviceId").html("");
                $("#deviceWMode").html("");
            }
            $.ajax({
                url: '/Home/GetDeviceInfo',
                data: { id: $("#ddlCihazlar").val() },
                success: function (device) {
                    $("#deviceName").html(device.name);
                    $("#deviceId").html(device.id);
                    $("#deviceWMode").html(device.workingMode); 

                    $.ajax({
                        url: '/Home/GetDeviceSensorInfo',
                        data: { deviceId: device.id },
                        success: function (sensorDatalar) {
                            console.log(sensorDatalar)
                        }

                    });
                }
            });
        })
    });
</script>



